<html>
	<head>
		<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
		<script>
			function hexToRGBA(h) {
				let r = 0, g = 0, b = 0
				r = "0x" + h[1] + h[2]
				g = "0x" + h[3] + h[4]
				b = "0x" + h[5] + h[6]
				return ""+ +(r/244) + "," + +(g/244) + "," + +(b/244) + ",1";
			}

			window.addEventListener('load', (event) => {
				const accent_element = document.querySelector("#accent")
				accent_element.addEventListener(
					"input",
					(event) => {
						const accent_color = event.target.value
						const model_viewer_elem = document.querySelector("model-viewer")
						const material = model_viewer_elem.model.materials
						const accent_string = hexToRGBA(accent_color)
						const color = accent_string.split(',').map(accent_string=> parseFloat(accent_string))
						material[1].pbrMetallicRoughness.setBaseColorFactor(color)
					}
					, false)
			} )

		</script>
	</head>
	<body>
		<model-viewer
			style="width: 100vw; height: 100vh; height: -webkit-fill-available"
			src="/web-experiments/files/gizmo.glb"
			alt="Gizmo"
			loading="eager" environment-image="neutral" autoplay=""
			auto-rotate="" ar="" camera-controls=""
			min-camera-orbit="auto auto 400%" max-camera-orbit="auto auto 200%" ar-status="not-presenting">

			<div class="Hotspot" slot="hotspot-1" data-position="0.7721092808262728m 0.9415203464274056m 0.771337604496809m" data-normal="0.5773502691896258m 0.5773502691896258m 0.5773502691896258m" data-visibility-attribute="visible" data-visible="">
				<div style="background:rgba(244,244,244,.5);border:1px solid;border-radius:10px;padding:5px;" class="HotspotAnnotation">Accent Color
					<input id="accent" type="color"><!--?input-->
				</div>
			</div>
			<button class="Hotspot" slot="hotspot-2" data-position="-0.7641182912635949m 0.06643542835452589m 0.29201543006079533m" data-normal="-0.32968724603088073m 5.060656792474643e-7m -0.9440902074507063m" data-visibility-attribute="visible" data-visible="">
				<div class="HotspotAnnotation">Air Vents</div>
			</button>
		</model-viewer>
	</body>
</html>
